<template name="Topic">
  <div class="topic">
    {{#if currentUser}}
      {{#if canUpvote}}
        {{#if totalPoints}} <!-- user has hit their max -->
          {{#linkTo route='TopicShow' class="btn plusOne"}}
            <div class="{{topicSize}}">{{name}}</div>
            <span class="right">&nbsp;+ {{totalPoints}}</span>
          {{/linkTo}}
        {{else}} <!-- !totalPoints -->
          <a class="btn plusOne">
            <div class="topic {{topicSize}}">{{name}}</div>
          </a>
        {{/if}}
      {{else}}
        {{> unvotable }}<!-- !upvote --> 
      {{/if}}
      {{#if canDownvote}}
        <a class="btn minusOne">- {{points}}</a>
      {{/if}}
    {{else}}
      {{> unvotable }}<!-- !currentUser or 'not loggedin' -->
    {{/if}}
  </div>
</template>

<template name="unvotable">
  {{#linkTo route='TopicShow' class="btn unvotable"}}
    <div class="{{topicSize}}">
	{{name}}
    </div>
    <span class="right">&nbsp;+ {{totalPoints}}</span>
{{/linkTo}}
</template>
